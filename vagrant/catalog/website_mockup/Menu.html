<!DOCTYPE html>
<!-- saved from url=(0029)http://localhost:8000/menu/3/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Menu</title>
    
    <script src="./Menu_files/cb=gapi.loaded_1" async=""></script><script src="./Menu_files/cb=gapi.loaded_0" async=""></script><script src="./Menu_files/client-platform.js" async="" defer="" gapi_processed="true"></script>
    <link rel="stylesheet" href="http://localhost:8000/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://localhost:8000/static/css/main.css">
</head>
    
<body>
    <script src="./Menu_files/knockout-3.3.0.js"></script>
    <script src="./Menu_files/ajax.js"></script>
    <script src="./Menu_files/signin.js"></script>
    
    <div id="body">
        <span id="signinButton" data-bind="visible: !user.username()" style="display: none;">
            <div id="___signin_0" style="text-indent: 0px; margin: 0px; padding: 0px; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 112px; height: 36px; position: relative; background: transparent;"><button style="opacity: 0; z-index: 10000; left: 0px; top: 0px; position: absolute; cursor: pointer; outline: 0px; width: 112px; height: 36px;">Sign in with Google</button><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 112px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 36px;" tabindex="0" vspace="0" width="100%" id="I0_1432710891746" name="I0_1432710891746" src="./Menu_files/signin.html" data-gapiattached="true" title="Sign in with Google"></iframe></div>
        </span>
        <span id="signoutButton" data-bind="visible: user.username">
            <button class="btn btn-danger" data-bind="click: logout">
                <img id="user-img" data-bind="attr: {src: user.picture}" src="./Menu_files/photo.jpg">
                Logout
            </button>
        </span>
        
<a id="back-btn" class="btn btn-lg btn-primary" href="http://localhost:8000/"><span class="glyphicon glyphicon-menu-left"></span></a>
<div class="container" style="margin-top:28px">
    <div class="row text-center">
        <h1 data-bind="text: restaurant.name">Panda Garden</h1>
    </div>
        <br>
    <div class="row">
        <div class="col-md-3 text-center" style="font-size: 28px">
            <strong data-bind="text: restaurant.phone">555-2363</strong>
        </div>
        <div class="col-md-5 col-md-offset-4 text-center" data-bind="visible: user.username">
            <a class="btn btn-primary text-uppercase" href="http://localhost:8000/new/item/3">Add new item</a>
            <a class="btn btn-warning text-uppercase" data-bind="click: delete_restaurant">Delete Restaurant</a>
        </div>
    </div>
    <div class="row">
        <table class="table table-striped">
            <tbody data-bind="foreach: food_list">
                <tr>
                    <td style="width: 30%">
                        <div class="row">
                            <div class="col-md-6">
                                <strong data-bind="text: name">Pho</strong>
                            </div>
                            <div class="col-md-6 btn-group">
                                <button type="button" class="btn btn-warning" data-bind="css: {&#39;btn-warning&#39;: rating() == 1}, click: $parent.set_rating.bind($data, 1)"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span></button>
                                <button type="button" class="btn" data-bind="css: {&#39;btn-success&#39;: rating() == 2}, click: $parent.set_rating.bind($data, 2)"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span></button>
                                <button type="button" class="btn" data-bind="css: {&#39;btn-danger&#39;: rating() == 3}, click: $parent.set_rating.bind($data, 3)"><span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span></button>
                            </div>
                        </div>
                    </td>
                    <td data-bind="text: description">a Vietnamese noodle soup consisting of broth, linguine-shaped rice noodles called banh pho, a few herbs, and meat.</td>
                    <td>$<span data-bind="text: price">8.99</span></td>
                    <td>
                        <button type="button" class="btn btn-primary" data-bind="click: $parent.edit"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>
                    </td>
                </tr>
            
                <tr>
                    <td style="width: 30%">
                        <div class="row">
                            <div class="col-md-6">
                                <strong data-bind="text: name">Chinese Dumplings</strong>
                            </div>
                            <div class="col-md-6 btn-group">
                                <button type="button" class="btn btn-warning" data-bind="css: {&#39;btn-warning&#39;: rating() == 1}, click: $parent.set_rating.bind($data, 1)"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span></button>
                                <button type="button" class="btn" data-bind="css: {&#39;btn-success&#39;: rating() == 2}, click: $parent.set_rating.bind($data, 2)"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span></button>
                                <button type="button" class="btn" data-bind="css: {&#39;btn-danger&#39;: rating() == 3}, click: $parent.set_rating.bind($data, 3)"><span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span></button>
                            </div>
                        </div>
                    </td>
                    <td data-bind="text: description">a common Chinese dumpling which generally consists of minced meat and finely chopped vegetables wrapped into a piece of dough skin. The skin can be either thin and elastic or thicker.</td>
                    <td>$<span data-bind="text: price">6.99</span></td>
                    <td>
                        <button type="button" class="btn btn-primary" data-bind="click: $parent.edit"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>
                    </td>
                </tr>
            
                <tr>
                    <td style="width: 30%">
                        <div class="row">
                            <div class="col-md-6">
                                <strong data-bind="text: name">Gyoza</strong>
                            </div>
                            <div class="col-md-6 btn-group">
                                <button type="button" class="btn btn-warning" data-bind="css: {&#39;btn-warning&#39;: rating() == 1}, click: $parent.set_rating.bind($data, 1)"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span></button>
                                <button type="button" class="btn" data-bind="css: {&#39;btn-success&#39;: rating() == 2}, click: $parent.set_rating.bind($data, 2)"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span></button>
                                <button type="button" class="btn" data-bind="css: {&#39;btn-danger&#39;: rating() == 3}, click: $parent.set_rating.bind($data, 3)"><span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span></button>
                            </div>
                        </div>
                    </td>
                    <td data-bind="text: description">The most prominent differences between Japanese-style gyoza and Chinese-style jiaozi are the rich garlic flavor, which is less noticeable in the Chinese version, the light seasoning of Japanese gyoza with salt and soy sauce, and the fact that gyoza wrappers are much thinner</td>
                    <td>$<span data-bind="text: price">9.95</span></td>
                    <td>
                        <button type="button" class="btn btn-primary" data-bind="click: $parent.edit"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>
                    </td>
                </tr>
            
                <tr>
                    <td style="width: 30%">
                        <div class="row">
                            <div class="col-md-6">
                                <strong data-bind="text: name">Stinky Tofu</strong>
                            </div>
                            <div class="col-md-6 btn-group">
                                <button type="button" class="btn" data-bind="css: {&#39;btn-warning&#39;: rating() == 1}, click: $parent.set_rating.bind($data, 1)"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span></button>
                                <button type="button" class="btn" data-bind="css: {&#39;btn-success&#39;: rating() == 2}, click: $parent.set_rating.bind($data, 2)"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span></button>
                                <button type="button" class="btn btn-danger" data-bind="css: {&#39;btn-danger&#39;: rating() == 3}, click: $parent.set_rating.bind($data, 3)"><span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span></button>
                            </div>
                        </div>
                    </td>
                    <td data-bind="text: description">Taiwanese dish, deep fried fermented tofu served with pickled cabbage.</td>
                    <td>$<span data-bind="text: price">6.99</span></td>
                    <td>
                        <button type="button" class="btn btn-primary" data-bind="click: $parent.edit"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>
                    </td>
                </tr>
            
                <tr>
                    <td style="width: 30%">
                        <div class="row">
                            <div class="col-md-6">
                                <strong data-bind="text: name">Veggie Burger</strong>
                            </div>
                            <div class="col-md-6 btn-group">
                                <button type="button" class="btn" data-bind="css: {&#39;btn-warning&#39;: rating() == 1}, click: $parent.set_rating.bind($data, 1)"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span></button>
                                <button type="button" class="btn btn-success" data-bind="css: {&#39;btn-success&#39;: rating() == 2}, click: $parent.set_rating.bind($data, 2)"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span></button>
                                <button type="button" class="btn" data-bind="css: {&#39;btn-danger&#39;: rating() == 3}, click: $parent.set_rating.bind($data, 3)"><span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span></button>
                            </div>
                        </div>
                    </td>
                    <td data-bind="text: description">Juicy grilled veggie patty with tomato mayo and lettuce</td>
                    <td>$<span data-bind="text: price">9.50</span></td>
                    <td>
                        <button type="button" class="btn btn-primary" data-bind="click: $parent.edit"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></button>
                    </td>
                </tr>
            </tbody>
        </table>
        
    </div>
</div>

<script>
var view_model = view_model || {};
view_model.restaurant = {"id": 3, "name": "Panda Garden", "note": "", "phone": "555-2363"};
    

view_model.edit = function(menu_item) {
    console.log(menu_item);
};
    

view_model.delete_restaurant = function() {
    var c = confirm("Are you sure you want to delete this restaurant and all menu items?");
    if (c) {
        var params = {id: view_model.restaurant.id};
        console.log(ko.toJS(params));
        post('/delete/restaurant', params, function(response) {
            // Go to list of restaurants.
            if (response.status == 200) {
                window.location = "/";
            }
        });
    }
};
    

/**
 * Save a rating change to the database.
 * @param {Number} rating The new rating.
 */
view_model.set_rating = function(rating) {
    this.rating(rating);
    post('/update/item', {id: this.id, rating: rating}, function(response) {
        // Reload this page if rating change failed to save.
        if (response.status != 200) {
            window.location = "/menu/3/";
        }
    });
};
    

/**
 * Send an AJAX request for item data and add to food_list array for display.
 */
view_model.get_items = function() {
    post('/get/items', {id: view_model.restaurant.id}, function(response) {
        view_model.food_list.removeAll();
        for (var i=0; i<response.items.length; i++) {
            var item = response.items[i];
            item.rating = ko.observable(item.rating);
            view_model.food_list.push(item);
        }
    });
}
view_model.food_list = ko.observableArray();
view_model.get_items();
</script>


    </div>

<script>
var view_model = view_model || {};
view_model._csrf = 'LUWP6C0FUA3PD11VBUI85H8SI35WAYKI';
view_model.user = {
    username: ko.observable(),
    picture: ko.observable(),
}

view_model.logout = function() {
    post('/gdisconnect', {}, function(response) {
        console.log(response);
        if (response.status == 200) {
            view_model.user.username('');
            view_model.user.picture('');
        }
    });
};
    
    
post('/get/user_info', {}, function(response) {
    if (response.username != undefined) {
        view_model.user.username(response.username);
        view_model.user.picture(response.picture);
    }
});

ko.applyBindings(view_model, document.getElementById('body'));
</script>
    

<iframe name="oauth2relay846302765" id="oauth2relay846302765" src="./Menu_files/postmessageRelay.html" tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe></body></html>